# {{ ansible_managed }}
# Systemd journald configuration

[Journal]
# Storage
Storage={{ systemd_journald_storage }}
Compress={{ 'yes' if systemd_journald_compress else 'no' }}
Seal={{ 'yes' if systemd_journald_seal else 'no' }}
SplitMode={{ systemd_journald_split_mode }}

# Retention
MaxRetentionSec={{ systemd_journald_max_retention_sec }}
MaxFileSec={{ systemd_journald_max_file_sec }}

# Size limits - System
SystemMaxUse={{ systemd_journald_system_max_use }}
SystemKeepFree={{ systemd_journald_system_keep_free }}
SystemMaxFileSize={{ systemd_journald_system_max_file_size }}
SystemMaxFiles={{ systemd_journald_system_max_files }}

# Size limits - Runtime
{% if systemd_journald_runtime_max_use %}
RuntimeMaxUse={{ systemd_journald_runtime_max_use }}
{% endif %}
{% if systemd_journald_runtime_keep_free %}
RuntimeKeepFree={{ systemd_journald_runtime_keep_free }}
{% endif %}
{% if systemd_journald_runtime_max_file_size %}
RuntimeMaxFileSize={{ systemd_journald_runtime_max_file_size }}
{% endif %}
RuntimeMaxFiles={{ systemd_journald_runtime_max_files }}

# Rate limiting
RateLimitIntervalSec={{ systemd_journald_rate_limit_interval }}
RateLimitBurst={{ systemd_journald_rate_limit_burst }}

# Forwarding
ForwardToSyslog={{ 'yes' if systemd_journald_forward_to_syslog else 'no' }}
ForwardToKMsg={{ 'yes' if systemd_journald_forward_to_kmsg else 'no' }}
ForwardToConsole={{ 'yes' if systemd_journald_forward_to_console else 'no' }}
ForwardToWall={{ 'yes' if systemd_journald_forward_to_wall else 'no' }}

# Log levels
MaxLevelStore={{ systemd_journald_max_level_store }}
MaxLevelSyslog={{ systemd_journald_max_level_syslog }}
MaxLevelKMsg={{ systemd_journald_max_level_kmsg }}
MaxLevelConsole={{ systemd_journald_max_level_console }}
MaxLevelWall={{ systemd_journald_max_level_wall }}

# Other settings
LineMax={{ systemd_journald_line_max }}
SyncIntervalSec={{ systemd_journald_sync_interval_sec }}
