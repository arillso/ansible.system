---
# Default sysctl parameters for performance tuning
tuning_sysctl_config:
    vm.dirty_ratio: 10
    vm.dirty_background_ratio: 3
    vm.dirty_expire_centisecs: 12000
    vm.dirty_writeback_centisecs: 500
    vm.swappiness: 10
    vm.vfs_cache_pressure: 50
    vm.min_free_kbytes: 131072
    net.core.rmem_default: 262144
    net.core.rmem_max: 33554432
    net.core.wmem_default: 262144
    net.core.wmem_max: 33554432
    net.core.netdev_max_backlog: 10000
    net.core.somaxconn: 32768
    net.ipv4.tcp_rmem: "4096 131072 33554432"
    net.ipv4.tcp_wmem: "4096 131072 33554432"
    net.ipv4.tcp_congestion_control: bbr
    net.ipv4.tcp_slow_start_after_idle: 0
    net.ipv4.tcp_tw_reuse: 1
    fs.file-max: 6815744
    fs.nr_open: 1048576
    kernel.pid_max: 4194304
    kernel.threads-max: 4194304

# Network specific sysctl
tuning_network_sysctl_config:
    net.ipv4.tcp_window_scaling: 1
    net.ipv4.tcp_timestamps: 1
    net.ipv4.tcp_sack: 1
    net.ipv4.tcp_fack: 1
    net.ipv4.tcp_moderate_rcvbuf: 1
    net.ipv4.tcp_no_metrics_save: 1
    net.ipv4.ip_local_port_range: "1024 65535"

# GRUB kernel parameters
tuning_grub_cmdline_linux_append: "transparent_hugepage=never"

# Swap configuration
tuning_swap_swappiness: 10
tuning_swap_file_enabled: false
tuning_swap_file_path: /swapfile
tuning_swap_file_size_mb: 2048

# I/O Scheduler
tuning_io_scheduler: auto
tuning_io_scheduler_override: null
tuning_io_scheduler_devices: []

# CPU Governor
tuning_cpu_governor: auto
tuning_cpu_governor_override: null

# Transparent Huge Pages
tuning_transparent_hugepages: madvise

# Tuned profile
tuning_tuned_profile: balanced

# Security limits
tuning_security_limits:
    - domain: "*"
      type: soft
      item: nofile
      value: 32768
    - domain: "*"
      type: hard
      item: nofile
      value: 65536
    - domain: "*"
      type: soft
      item: nproc
      value: 16384
    - domain: "*"
      type: hard
      item: nproc
      value: 32768

# Network ring buffers
tuning_network_ring_buffers: []

# Feature flags
tuning_network_tuning_enabled: true
tuning_validate_settings: true

# Advanced settings
tuning_sysctl_file: /etc/sysctl.d/99-tuning.conf
tuning_network_sysctl_file: /etc/sysctl.d/99-network-tuning.conf

# Packages
tuning_packages_list: "{{ _tuning_packages[ansible_os_family] | default([]) }}"
